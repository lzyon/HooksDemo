{"ast":null,"code":"import _slicedToArray from \"F:\\\\train\\\\train-ticket\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"F:\\\\train\\\\train-ticket\\\\src\\\\pages\\\\components\\\\City\\\\City.tsx\";\nimport React, { useState, useEffect } from \"react\";\nimport { observer } from \"mobx-react\";\nimport \"./City.scss\";\nimport { Header } from \"../../index\";\nimport index from \"../../../store/index\";\n\nconst City = props => {\n  const history = props.history;\n\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        cityList = _useState2[0],\n        setCityList = _useState2[1];\n\n  useEffect(() => {\n    const getCityList = async () => {\n      let res = await index.getCityList();\n\n      if (res.resultCode === 0) {\n        setCityList(res.result);\n        localStorage.setItem('cityList', JSON.stringify(res.result));\n      }\n    };\n\n    let cityArr = JSON.parse(localStorage.getItem('cityList') || '[]');\n\n    if (cityArr.length) {\n      setCityList(cityArr);\n    } else {\n      getCityList();\n    }\n  }, []);\n  console.log(index.station, '000-cityList');\n  return React.createElement(\"div\", {\n    className: \"city-page\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50\n    },\n    __self: this\n  }, React.createElement(Header, {\n    history: history,\n    title: \"选择城市\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51\n    },\n    __self: this\n  }), cityList.map(item => {\n    return React.createElement(\"div\", {\n      className: \"cityCate\",\n      key: item.idx,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"cateName\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }, item.idx), item.cities.map(cityItem => {\n      return React.createElement(\"div\", {\n        className: \"cityItem\",\n        key: cityItem.id,\n        onClick: () => {},\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60\n        },\n        __self: this\n      }, cityItem.name);\n    }));\n  }));\n};\n\nexport default observer(City);","map":{"version":3,"sources":["F:\\train\\train-ticket\\src\\pages\\components\\City\\City.tsx"],"names":["React","useState","useEffect","observer","Header","index","City","props","history","cityList","setCityList","getCityList","res","resultCode","result","localStorage","setItem","JSON","stringify","cityArr","parse","getItem","length","console","log","station","map","item","idx","cities","cityItem","id","name"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AAEA,SAASC,QAAT,QAAyB,YAAzB;AACA,OAAO,aAAP;AAEA,SAASC,MAAT,QAAuB,aAAvB;AACA,OAAOC,KAAP,MAAkB,sBAAlB;;AAoBA,MAAMC,IAAI,GAAIC,KAAD,IAAkB;AAAA,QACrBC,OADqB,GACTD,KADS,CACrBC,OADqB;;AAAA,oBAEGP,QAAQ,CAAC,EAAD,CAFX;AAAA;AAAA,QAEtBQ,QAFsB;AAAA,QAEZC,WAFY;;AAI7BR,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMS,WAAW,GAAG,YAAY;AAC9B,UAAIC,GAAG,GAAG,MAAMP,KAAK,CAACM,WAAN,EAAhB;;AACA,UAAIC,GAAG,CAACC,UAAJ,KAAmB,CAAvB,EAA0B;AACxBH,QAAAA,WAAW,CAACE,GAAG,CAACE,MAAL,CAAX;AACAC,QAAAA,YAAY,CAACC,OAAb,CAAqB,UAArB,EAAiCC,IAAI,CAACC,SAAL,CAAeN,GAAG,CAACE,MAAnB,CAAjC;AACD;AACF,KAND;;AAOA,QAAIK,OAAO,GAAGF,IAAI,CAACG,KAAL,CAAWL,YAAY,CAACM,OAAb,CAAqB,UAArB,KAAoC,IAA/C,CAAd;;AACA,QAAIF,OAAO,CAACG,MAAZ,EAAmB;AACjBZ,MAAAA,WAAW,CAACS,OAAD,CAAX;AACD,KAFD,MAEO;AACLR,MAAAA,WAAW;AACZ;AAGF,GAhBQ,EAgBN,EAhBM,CAAT;AAiBAY,EAAAA,OAAO,CAACC,GAAR,CAAYnB,KAAK,CAACoB,OAAlB,EAA2B,cAA3B;AACA,SACE;AAAK,IAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,MAAD;AAAQ,IAAA,OAAO,EAAEjB,OAAjB;AAA0B,IAAA,KAAK,EAAE,MAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAMGC,QAAQ,CAACiB,GAAT,CAAcC,IAAD,IAAoB;AAChC,WAAO;AAAK,MAAA,SAAS,EAAC,UAAf;AAA0B,MAAA,GAAG,EAAEA,IAAI,CAACC,GAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACL;AAAK,MAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAA2BD,IAAI,CAACC,GAAhC,CADK,EAEJD,IAAI,CAACE,MAAL,CAAYH,GAAZ,CAAiBI,QAAD,IAAoB;AACnC,aAAO;AAAK,QAAA,SAAS,EAAC,UAAf;AAA0B,QAAA,GAAG,EAAEA,QAAQ,CAACC,EAAxC;AAA4C,QAAA,OAAO,EAAE,MAAM,CAAE,CAA7D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAgED,QAAQ,CAACE,IAAzE,CAAP;AACD,KAFA,CAFI,CAAP;AAMD,GAPA,CANH,CADF;AAiBD,CAvCD;;AAwCA,eAAe7B,QAAQ,CAACG,IAAD,CAAvB","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { toJS } from \"mobx\";\r\nimport { observer } from \"mobx-react\";\r\nimport \"./City.scss\";\r\nimport { History } from \"history\";\r\nimport { Header } from \"../../index\";\r\nimport index from \"../../../store/index\";\r\nimport { InputItem } from 'antd-mobile';\r\n\r\ninterface CityInfo{\r\n  idx: string;\r\n  cities: City[];\r\n}\r\n\r\ninterface City{\r\n  id: number;\r\n  latitude: number;\r\n  longitude: number;\r\n  name: string;\r\n  pinyin: string;\r\n}\r\n\r\ninterface Props {\r\n  history: History;\r\n}\r\n\r\nconst City = (props: Props) => {\r\n  const { history } = props;\r\n  const [cityList, setCityList] = useState([]);\r\n  \r\n  useEffect(() => {\r\n    const getCityList = async () => {\r\n      let res = await index.getCityList();\r\n      if (res.resultCode === 0) {\r\n        setCityList(res.result);\r\n        localStorage.setItem('cityList', JSON.stringify(res.result));\r\n      } \r\n    }\r\n    let cityArr = JSON.parse(localStorage.getItem('cityList') || '[]');\r\n    if (cityArr.length){\r\n      setCityList(cityArr);\r\n    } else {\r\n      getCityList();\r\n    }\r\n    \r\n\r\n  }, [])\r\n  console.log(index.station, '000-cityList')\r\n  return (\r\n    <div className=\"city-page\">\r\n      <Header history={history} title={\"选择城市\"} />\r\n      {/* <InputItem\r\n        clear\r\n        placeholder=\"请输入城市或车站名\"\r\n      /> */}\r\n      {cityList.map((item: CityInfo) => {\r\n        return <div className=\"cityCate\" key={item.idx}>\r\n          <div className=\"cateName\">{item.idx}</div>\r\n          {item.cities.map((cityItem: City) => {\r\n            return <div className=\"cityItem\" key={cityItem.id} onClick={() => {}}>{cityItem.name}</div>\r\n          })}\r\n        </div>\r\n      })}\r\n    </div>\r\n  );\r\n};\r\nexport default observer(City);\r\n"]},"metadata":{},"sourceType":"module"}